(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t,n){e.exports=n(262)},152:function(e,t,n){},212:function(e,t,n){},236:function(e,t,n){},238:function(e,t,n){},252:function(e,t,n){},254:function(e,t,n){},256:function(e,t,n){},258:function(e,t,n){},260:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),s=n.n(i),c=n(18),o=n(20),l=n(19),u=n(22),d=n(21),m=n(23),p=n(60);window.jQuery=window.$=p;n(137),n(150),n(152);var f=n(267),_=n(263),h=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.onGetDatasetList()}},{key:"onSelectAlert",value:function(e){var t=this.props,n=t.ui,a=t.onChangeDataset;e!==n.selectDatasetIndex&&a(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.ui.selectDatasetIndex,i=0===n.length,s=i?"Loading datasets...":n[a].name;return r.a.createElement("div",{className:"QP__datasetList"},r.a.createElement("div",{className:"QP__datasetList__title"},"Datasets"),r.a.createElement(f.a,{id:"dataset-list-dropdown",className:"QP__datasetList__dropdownButton",disabled:i,title:s},n.map(function(t,n){return r.a.createElement(_.a,{key:n,active:n===a,eventKey:n,onSelect:function(t){return e.onSelectAlert(t)}},t.name)})))}}]),t}(r.a.Component),v=n(12),b=n(10),E=n.n(b),y=n(14),g=n(33),O=n.n(g),x=function(e){if(!e)return"";var t="?";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+e[n]+"&");return t.substring(0,t.length-1)},w=function(e,t){return function(n){console.log("err response:",n),e({type:t,payload:n.response&&n.response.data&&n.response.data.message||"Request error!"})}},I=function(e){return e&&e.availableObjects?e.availableObjects.attributes.map(function(e){return{type:"attribute",attribute:{id:e.id,name:e.name}}}).concat(e.availableObjects.metrics.map(function(e){return{type:"metric",metric:{id:e.id,name:e.name}}})).concat(Object(g.flatMap)(e.availableObjects.attributes.filter(function(e){return void 0!==e.forms}),function(e){return e.forms.map(function(t){return{type:"form",attribute:{id:e.id,name:e.name},form:{id:t.id,name:t.name}}})})):[]},j=n(5),k=n(30),N=n(4),C=n(122),P=n.n(C),S={restServerUrl:"https://demo.microstrategy.com/MicroStrategyLibrary/api",projectId:"B7CA92F04B9FAE8D941C3E9B7E0CD754",itemPerPage:20,cubes:[],reports:[],datasets:[]},L="DISPLAY_ERROR_MSG",Q="HIDE_ERROR_MSG",A="SET_DATASET_LIST",T="CHANGE_SELECT_DATASET",D="TOGGLE_ATTRIBUTE_SELECTION",F="TOGGLE_ALL_ATTRIBUTES",R="TOGGLE_METRIC_SELECTION",M="TOGGLE_ALL_METRICS",q="ADD_NEW_EXPRESSION",B="DELETE_AN_EXPRESSION",V="MODIFY_EXPRESSION",G="MODIFY_ATTRIBUTE_ELEMENTS",H="CLEAR_ALL_FILTER_EXPRESSIONS",U="CHANGE_SORTING_ELEMENT",X="CHANGE_SORTING_CHOICE",K="ADD_SORTING_DROPDOWN",W="CHANGE_SORTING_DATA",$="DELETE_SORTING_DROPDOWN",z="CLEAR_SORTING_STATE",Y="REFRESH_INSTANCE_ID",J="REFRESH_RESULT_PANEL",Z="GO_TO_PAGE",ee="BEGIN_LOADING_PAGE",te="ADD_NEW_HTTP_REQUEST",ne="SELECT_REQUEST",ae="SELECT_DETAIL_TAB",re="CLEAR_REQUESTS",ie=2,se=776,ce=768,oe=se,le=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a){var r,i,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,i={"content-type":"application/json"},"/auth/login"!==t&&(i=Object(N.a)({},i,n.headers,Object(k.a)({},"X-MSTR-AuthToken",sessionStorage.getItem("X-MSTR-AuthToken")))),r=Object(N.a)({},n,{headers:i}),e.next=6,P()(Object(N.a)({url:S.restServerUrl+t,withCredentials:!0},r));case 6:return s=e.sent,a({type:te,payload:{responseStatus:s.status,responseHeader:s.headers,responseBody:s.data,url:t,params:r.params?r.params:"",requestHeader:r.headers?r.headers:"",requestData:r.data?r.data:"",method:r.method?r.method:"get"}}),e.abrupt("return",s);case 9:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),ue=function(){var e=Object(y.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le("/auth/login",{method:"post",data:{loginMode:8}},t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(y.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t);case 2:n=e.sent,a=n.headers["X-MSTR-AuthToken".toLowerCase()],sessionStorage.setItem("X-MSTR-AuthToken",a);case 4:case"end":return e.stop()}var a},e)}));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a){var r,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<ie)){e.next=21;break}return e.prev=2,e.next=5,le(t,n,a);case 5:return i=e.sent,e.abrupt("return",i.data);case 9:if(e.prev=9,e.t0=e.catch(2),r>0||401!==e.t0.response.status){e.next=17;break}return e.next=15,de(a);case 15:e.next=18;break;case 17:throw e.t0;case 18:r++,e.next=1;break;case 21:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t,n,a){return e.apply(this,arguments)}}(),pe=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me("/searches/results",{headers:Object(k.a)({},"X-MSTR-ProjectID",t),params:{type:n,limit:5}},a);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{totalItems:0,result:[]});case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t,n,a){return e.apply(this,arguments)}}(),fe=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a){var r,i;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.subtype===oe?"/cubes/":"/reports/",i="/v2"+r+t.id,e.next=5,me(i,{headers:Object(k.a)({},"X-MSTR-ProjectID",n)},a);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{definition:null});case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,n,a){return e.apply(this,arguments)}}(),_e=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a,r,i){var s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s="/cubes/".concat(n.id,"/instance/").concat(a,"/attributes/").concat(r,"/elements"),e.next=3,me(s,{headers:Object(k.a)({},"X-MSTR-ProjectID",t),params:{offset:0,limit:50}},i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),he=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a,r,i){var s,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.subtype===oe?"/cubes/":"/reports/",c="".concat("/v2").concat(s).concat(t.id,"/instances/").concat(a),e.next=4,me(c,{headers:Object(k.a)({},"X-MSTR-ProjectID",n),params:{offset:r*S.itemPerPage,limit:S.itemPerPage}},i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),ve=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a,r,i){var s,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.subtype===oe?"/cubes/":"/reports/",c="/v2"+s+t.id+"/instances",e.next=4,me(c,{method:"post",headers:Object(k.a)({},"X-MSTR-ProjectID",n),params:{offset:a*S.itemPerPage,limit:S.itemPerPage},data:r},i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),be=function(e){return e.ui.projectId},Ee=function(e){return e.resultTable.instanceId},ye=function(e){return Oe(e,"attributes")},ge=function(e){return Oe(e,"metrics")},Oe=function(e,t){var n=xe(e);return null===n?null:n.definition.availableObjects[t]},xe=function(e){var t=e.datasetList,n=t.data,a=t.ui,r=null;return n.length>0&&(r=n[a.selectDatasetIndex]),r},we=function(e){var t={},n=e.attributes.ui.unselect,a=e.metrics.ui.unselect,r=0===Object.keys(n).length,i=0===Object.keys(a).length;if(!r||!i){var s=ye(e),c=ge(e);t.requestedObjects={attributes:s.map(function(e){return{id:e.id}}).filter(function(e){return!(e.id in n)}),metrics:c.map(function(e){return{id:e.id}}).filter(function(e){return!(e.id in a)})}}e.filters&&e.filters.viewFilter.expressions&&(t.viewFilter=Object.assign({},e.filters.viewFilter.expressions)),e.filters&&e.filters.metricLimits.expressions&&(t.metricLimits=Object.assign({},e.filters.metricLimits.expressions));var o=e.sorting.output;return o&&o.length>0&&(t.sorting=Ie(o,a,n)),t},Ie=function(e,t,n){return e.filter(function(e){return"attribute"===e.type||"form"===e.type?!O.a.get(n,e.attribute.id,!1):!O.a.get(t,e.metric.id,!1)})},je=function(){var e=Object(y.a)(E.a.mark(function e(t,n){var a,r,i,s,c,o,l,u;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(t);case 2:return a=n(),r=be(a),i=[se,ce],e.next=7,Promise.all(i.map(function(e){return pe(r,e,t)}));case 7:return s=e.sent,c=[].concat(Object(j.a)(s[0].result),Object(j.a)(s[1].result)),e.next=11,Promise.all(c.map(function(e){return fe(e,r,t)}));case 11:for(o=e.sent,l=0;l<c.length;l++)c[l].definition=o[l].definition;return u=c.filter(function(e){return null!==e.definition}),e.abrupt("return",u);case 15:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),ke=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a){var r,i,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),i=be(r),e.next=4,ve(xe(r),i,a,we(r),t);case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a){var r,i,s,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),i=be(r),s=xe(r),c=Ee(r),e.next=6,he(s,i,c,a,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a){var r,i,s,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),i=be(r),s=xe(r),c=Ee(r),e.next=6,_e(i,s,c,a,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),Pe=function(){return function(e,t){Le(e,t).catch(w(e,L))}},Se=function(e){return function(t,n){t({type:T,payload:e}),Qe(t,n,0).catch(w(t,L))}},Le=function(){var e=Object(y.a)(E.a.mark(function e(t,n){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,n);case 2:if(0!==(a=e.sent).length){e.next=6;break}return t({type:L,payload:"Can't get a valid dataset. Please retry."}),e.abrupt("return");case 6:return t({type:A,payload:a}),e.next=9,Qe(t,n,0);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(t,n,a);case 2:if(2!==(r=e.sent).status){e.next=6;break}return t({type:L,payload:"This report has unanswered prompts. It is currently not supported in this demo."}),e.abrupt("return");case 6:return t({type:J,payload:r}),e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}();var Ae=Object(c.b)(function(e){var t=e.datasetList;return{data:t.data,ui:t.ui}},function(e){return Object(v.b)({onGetDatasetList:Pe,onChangeDataset:Se},e)})(h),Te=n(268),De=[{name:"Greater",value:">"},{name:"Less",value:"<"},{name:"Equals",value:"="},{name:"NotEqual",value:"!="},{name:"BeginsWith",value:"..."},{name:"Contains",value:"<>"},{name:"Like",value:"..."}],Fe=[{name:"In List",value:"In"},{name:"Not In List",value:"NotIn"}],Re=function(e){console.log("rawExpressionData ",e.operator);var t,n,a,r,i=e.expressionIndex,s="Attribute"===e.targetObject.type,c=e.targetObject,o=s?e.selectAttributeForm.name:"",l=e.isQualification,u=e.selectedElements,d=e.selectedListOperator;if(l)r=c.name+(s?" @"+o:"")+" "+e.operator+" "+e.constant,s?(t={type:"form",attribute:{id:c.id,name:c.name},form:{id:e.selectAttributeForm.id,name:e.selectAttributeForm.name}},n={type:"constant",dataType:"Char",value:e.constant}):(t={type:"metric",id:c.id,name:c.name},n={type:"constant",dataType:"Real",value:e.constant}),a={contentDisplay:r,expression:{operator:e.operator,operands:[t,n]}};else{var m=u.map(function(e){return e.name}).join(",");r=c.name+" "+d.name+" "+m,t={type:"attribute",id:c.id,name:c.name},n={type:"elements",elements:u},a={contentDisplay:r,expression:{operator:d.value,operands:[t,n]}}}return a.expressionIndex=i,a.targetObjectId=c.id,a.isViewFilter=e.isViewFilter,a},Me=function(e,t,n,a,r,i){var s,c,o,l=0,u="metric"!==t.type;return e?u?(c=t.attribute.id,o=t.form.id):c=t.id:c=i,s=r.findIndex(function(e){return e.id===c}),u&&(l=r[s].forms.findIndex(function(e){return e.id===o})),{selectedIndex:s,operatorIndex:De.findIndex(function(e){return e.name===a}),selectFormIndex:l,constant:n.value}},qe=function(e,t,n,a,r){var i;i=n?e.filters.viewFilter.expressions.operands[t]:e.filters.metricLimits.expressions[r].operands[t];var s,c=0,o=0,l=0,u="",d=!1,m=0,p=[],f=!1,_=i.operands[0],h=i.operands[1],v=i.operator;if(n)if(d=!(Fe.findIndex(function(e){return e.value===v})>=0)){var b=Me(n,_,h,v,a,r);c=b.selectedIndex,l=b.operatorIndex,o=b.selectFormIndex,u=b.constant}else{s=_.id,c=a.findIndex(function(e){return e.id===s}),m=Fe.findIndex(function(e){return v===e.value}),h.elements.forEach(function(e){var t=a[c].elements.findIndex(function(t){return t.id===e.id});t>=0&&p.push(t)}),f=p.length===a[c].elements.length}else{d=!0;var E=Me(n,_,h,v,a,r);c=E.selectedIndex,l=E.operatorIndex,o=E.selectFormIndex,u=E.constant}return{metricLimitTargetObjectId:r,expressionIndex:t,isEditing:!0,availableObjects:a,isViewFilter:n,selectFormIndex:o,operatorIndex:l,constant:u,isQualification:d,selectedListOptionIndex:m,selectedElementIndexs:p,isALLElementChecked:f,selectedIndex:c}},Be=(n(212),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={show:!1,expressionIndex:n.props.expressionIndex,isEditing:n.props.isEditing,isViewFilter:n.props.isViewFilter,selectedIndex:n.props.selectedIndex,selectFormIndex:n.props.selectFormIndex,operatorIndex:n.props.operatorIndex,constant:n.props.constant,isQualification:n.props.isQualification,selectedListOptionIndex:n.props.selectedListOptionIndex,selectedElementIndexs:n.props.selectedElementIndexs,isALLElementChecked:n.props.isALLElementChecked,isOkButtonEnable:n.props.isEditing},n}return Object(m.a)(t,e),Object(l.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return e.show!==t.show?{show:e.show,expressionIndex:e.expressionIndex,isEditing:e.isEditing,isViewFilter:e.isViewFilter,selectedIndex:e.selectedIndex,selectFormIndex:e.selectFormIndex,operatorIndex:e.operatorIndex,constant:e.constant,isQualification:e.isQualification,selectedListOptionIndex:e.selectedListOptionIndex,selectedElementIndexs:e.selectedElementIndexs,isALLElementChecked:e.isALLElementChecked,isOkButtonEnable:e.isEditing}:t}}]),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.availableObjects;if(0===t.length)return r.a.createElement("div",null);var n,a=this.state.selectedIndex;n="attribute"===(t[a].type||"").toLowerCase();var i=this.state.isEditing?"Edit":"New",s=this.state.isViewFilter?"View Filter":"Metric limit";return r.a.createElement(Te.a,{className:"QP__filter-editor",backdrop:"static",show:this.props.show,onEntered:function(){e.onEntered()},onHide:function(){e.onClose()}},r.a.createElement(Te.a.Header,{closeButton:!0},r.a.createElement(Te.a.Title,null,r.a.createElement("div",{className:"dialogue-title-bar"},r.a.createElement("h2",{className:"title-bar-text"},"".concat(i," ").concat(s))))),r.a.createElement(Te.a.Body,null,r.a.createElement("div",{className:"QP__filter-editor__body"},r.a.createElement("div",{className:"QP__filter-editor__left"},r.a.createElement("div",{className:"grey-label"},"Based on"),r.a.createElement(f.a,{className:"QP__filter__editor__DropDown QP__filter__editor__attribute-btn \n                                 ".concat("attribute"===(t[this.state.selectedIndex].type||"").toLowerCase()?"attribute":"metric"),title:this.state.selectedIndex>=0?t[this.state.selectedIndex].name:"",id:"dropdown-size-medium"},t.map(function(t,n){return r.a.createElement(_.a,{className:"QP__filter__editor__MenuItem ".concat("attribute"===(t.type||"").toLowerCase()?"attribute":"metric"),key:n,active:n===e.state.selectedIndex,eventKey:n,onSelect:function(t){return e.targetObjectSelectChange(t)}},t.name)})),r.a.createElement("div",null,function(){var a,i,s,c,o;return n&&e.state.isViewFilter?(a=r.a.createElement("div",null,r.a.createElement("div",{className:"grey-label"},"Choose elements by"),r.a.createElement(f.a,{className:"QP__filter__editor__DropDown",title:e.state.isQualification?"Qualification On":"Selecting in list",id:"dropdown-size-medium"},r.a.createElement(_.a,{className:"QP__filter__editor__MenuItem",key:0,active:e.state.isQualification,eventKey:0,onSelect:function(t){return e.isQualificationSelectChange(t)}},"Qualification On"),r.a.createElement(_.a,{className:"QP__filter__editor__MenuItem",key:1,active:!e.state.isQualification,eventKey:1,onSelect:function(t){return e.isQualificationSelectChange(t)}},"Selecting in list"))),s=t[e.state.selectedIndex].forms.map(function(t,n){return r.a.createElement("div",{className:"custom-radio-container",key:n},r.a.createElement("div",{className:"custom-control custom-radio",onClick:function(t){return e.state.selectFormIndex!==n?e.formSelectChange(n):""}},r.a.createElement("input",{type:"radio",className:"custom-control-input",name:"attributeForms",id:"attributeForms"+n,value:n,checked:e.state.selectFormIndex===n,readOnly:!0}),r.a.createElement("div",{className:"QP__item-icon ".concat(e.state.selectFormIndex===n?"qp-radio-check-icon":"qp-radio-uncheck-icon")}),r.a.createElement("span",{className:"custom-control-label",htmlFor:"attributeForms"+n,onClick:function(t){return e.state.selectFormIndex!==n?e.formSelectChange(n):""}},t.name)))}),c=Fe.map(function(t,n){return r.a.createElement("div",{className:"custom-radio-container",key:n},r.a.createElement("div",{className:"custom-control custom-radio",onClick:function(t){return e.state.selectedListOptionIndex!==n?e.listOptionSelectChange(n):""}},r.a.createElement("input",{type:"radio",className:"custom-control-input",name:"listOptions",id:"listOptions"+n,value:n,ref:"listOptions"+n,checked:e.state.selectedListOptionIndex===n,readOnly:!0}),r.a.createElement("div",{className:"QP__item-icon ".concat(e.state.selectedListOptionIndex===n?"qp-radio-check-icon":"qp-radio-uncheck-icon")}),r.a.createElement("span",{className:"custom-control-label",htmlFor:"listOptions"+n},t.name)),r.a.createElement("br",null))}),o=e.state.isQualification?s:c,i=r.a.createElement("div",{className:"QP__filter__editor__choosePart"},r.a.createElement("div",null,a),r.a.createElement("div",{className:"QP__filter__editor__selectPart"},o))):i=r.a.createElement("div",null),i}())),function(){if(!e.state.isQualification&&n&&e.state.isViewFilter){var t=e.props.availableObjects[e.state.selectedIndex].elements;return r.a.createElement("div",{className:"QP__filter-editor__middle"},t&&r.a.createElement("div",{className:"element-list-header",onClick:function(t){return e.clickAllElements()}},r.a.createElement("input",{className:"QP__filter__editor__list__header__input",type:"checkbox",name:"chooseMutltiElements",value:"All",checked:e.state.isALLElementChecked,ref:"AllElements",readOnly:!0}),r.a.createElement("div",{className:"QP__item-icon ".concat(e.state.isALLElementChecked?"qp-multi-check-icon":"qp-multi-uncheck-icon")}),r.a.createElement("div",{className:"element-span-wrapper"},"All")),r.a.createElement("div",{className:"element-list"},t&&t.map(function(t,n){return r.a.createElement("div",{key:n,className:"element-item",onClick:function(t){return e.clickMultiElementSpan(n)}},r.a.createElement("input",{className:"QP__filter__editor__list__element__input",type:"checkbox",name:"chooseMutltiElements",value:n,checked:e.state.selectedElementIndexs.find(function(e){return e===n})>=0,onChange:function(t){e.clickMultiElementOption(n)},ref:t.name,readOnly:!0}),r.a.createElement("div",{className:"QP__item-icon ".concat(e.state.selectedElementIndexs.find(function(e){return e===n})>=0?"qp-multi-check-icon":"qp-multi-uncheck-icon")}),r.a.createElement("div",{className:"element-span-wrapper"},t.name))})))}return r.a.createElement("div",{className:"QP__filter-editor__middle qualification-on"},r.a.createElement("div",{className:"grey-label"},"Based On"),r.a.createElement("ul",{id:"operatorsUlId",className:"list-group"},De.map(function(t,n){var a=e.state.operatorIndex===n?"selected":"";return r.a.createElement("li",{className:"".concat(a," client-list-group-item client-list-group-item-action client-li"),key:n,onClick:function(t){return e.onOperatorOptionclick(t)},value:n,tabIndex:"1"},t.name)})))}(),r.a.createElement("div",{className:"QP__filter-editor__right"},!e.state.isQualification&&n&&e.state.isViewFilter?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement("div",{className:"grey-label"},"Based on"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Please input constant",onChange:function(t){e.ConstantValueChange(t)},value:e.state.constant}))))))),r.a.createElement(Te.a.Footer,null,r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",disabled:!this.state.isOkButtonEnable,onClick:function(){e.onClickOK()}},"OK"),r.a.createElement("button",{className:"btn btn-default btn-outline-secondary",onClick:function(){e.onClose()}},"Cancel"))))}},{key:"onOperatorOptionclick",value:function(e){this.setState({operatorIndex:parseInt(e.target.value)})}},{key:"ConstantValueChange",value:function(e){var t=e.target.value,n=!0;0===t.length&&(n=!1),this.setState({constant:t,isOkButtonEnable:n})}},{key:"targetObjectSelectChange",value:function(e){this.setState({selectedIndex:e,isQualification:!0})}},{key:"formSelectChange",value:function(e){this.setState({selectFormIndex:e})}},{key:"isQualificationSelectChange",value:function(e){0===e?this.setState({isQualification:!0}):(this.setState({isQualification:!1}),this.getAttributeElements(!0))}},{key:"listOptionSelectChange",value:function(e){this.setState({selectedListOptionIndex:e})}},{key:"getCheckBoxElementName",value:function(e){return this.props.availableObjects[this.state.selectedIndex].elements[e].name}},{key:"clickMultiElement",value:function(e,t){var n;n=this.state.selectedElementIndexs.filter(function(t){return t!==e}),t?n=[].concat(Object(j.a)(n),[e]):this.state.isALLElementChecked&&this.setState({isALLElementChecked:!1}),this.setState({selectedElementIndexs:n});var a=!0;0===n.length&&(a=!1),this.setState({isOkButtonEnable:a})}},{key:"clickMultiElementSpan",value:function(e){this.clickMultiElement(parseInt(e,10),!this.refs[this.getCheckBoxElementName(parseInt(e,10))].checked)}},{key:"clickMultiElementOption",value:function(e){this.clickMultiElement(parseInt(e,10),this.refs[this.getCheckBoxElementName(parseInt(e,10))].checked)}},{key:"clickAllElements",value:function(){if(this.state.isALLElementChecked)this.setState({isALLElementChecked:!1,selectedElementIndexs:[],isOkButtonEnable:!1});else{var e=[];this.props.availableObjects[this.state.selectedIndex].elements.forEach(function(t,n){e.push(n)}),this.setState({isALLElementChecked:!0,selectedElementIndexs:e,isOkButtonEnable:!0})}}},{key:"getAttributeElements",value:function(e){var t=this.props.availableObjects,n=this.state.selectedIndex;!("attribute"===(t[n].type||"").toLowerCase())||!e&&this.state.isQualification||t[n].elements||this.props.onGetAttributeElement(t[n].id)}},{key:"onEntered",value:function(){this.getAttributeElements()}},{key:"onClose",value:function(){this.props.handleCloseEditor()}},{key:"onClickOK",value:function(){this.onClickAddOrModifyExpression(),this.onClose()}},{key:"onClickAddOrModifyExpression",value:function(){var e=this.props.availableObjects,t=this.state.selectedIndex,n=[],a="attribute"===(e[t].type||"").toLowerCase();this.state.selectedElementIndexs.forEach(function(a){n.push(e[t].elements[a])});var r={operator:De[this.state.operatorIndex].name,targetObject:e[t],selectAttributeForm:a?e[t].forms[this.state.selectFormIndex]:0,constant:this.state.constant,isQualification:this.state.isQualification,selectedElements:n,selectedListOperator:Fe[this.state.selectedListOptionIndex],expressionIndex:this.state.expressionIndex,isViewFilter:this.state.isViewFilter,metricLimitTargetObjectId:this.props.metricLimitTargetObjectId};this.state.isEditing?this.props.onModifyExpression(r):this.props.onAddNewExpression(r)}}]),t}(r.a.Component)),Ve=function(e){return function(t,n){Ge(t,n,e).catch(w(t,L))}},Ge=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a){var r,i,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<ie)){e.next=24;break}return e.prev=2,e.next=5,Ce(t,n,a);case 5:return i=e.sent,t({type:G,payload:{attributeId:a,data:i}}),e.abrupt("return",i);case 10:if(e.prev=10,e.t0=e.catch(2),r>0||404!==e.t0.response.status){e.next=20;break}return e.next=16,ke(t,n,0);case 16:s=e.sent,t({type:Y,payload:s}),e.next=21;break;case 20:throw e.t0;case 21:r++,e.next=1;break;case 24:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t,n,a){return e.apply(this,arguments)}}(),He=function(e,t,n){return{type:B,payload:{index:e,isViewFilter:t,targetObjectId:n}}},Ue=function(e){return{type:q,payload:Re(e)}},Xe=function(e){return{type:V,payload:Re(e)}},Ke=function(e){return{type:H,payload:e}};var We=Object(c.b)(function(e,t){var n,a,r="",i=t.isViewFilter||!1,s=xe(e),c=[].concat(Object(j.a)(s.definition.availableObjects.attributes),Object(j.a)(s.definition.availableObjects.metrics));if(i||(c=c.filter(function(e){return"metric"===e.type})),t.targetObjectId&&(r=t.targetObjectId,i||(c=c.filter(function(e){return e.id===r}))),console.log(t.expressionIndex),void 0!==t.expressionIndex){var o=parseInt(t.expressionIndex,10),l=qe(e,o,i,c,r);return l.show=t.show,l.needChange=t.needChange,console.log("result:",l),l}return n=!i||n,a=[],{needChange:t.needChange,show:t.show,expressionIndex:-1,isEditing:!1,availableObjects:c,isViewFilter:i,selectedIndex:0,selectFormIndex:0,operatorIndex:0,constant:"",isQualification:n,selectedListOptionIndex:0,selectedElementIndexs:a,isALLElementChecked:!1}},function(e){return Object(v.b)({onAddNewExpression:Ue,onModifyExpression:Xe,onGetAttributeElement:Ve},e)})(Be),$e=(n(236),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={showEditorModal:!1,isViewFilter:n.props.isViewFilter,viewFilterSummary:n.props.viewFilterSummary,metricLimitSummary:n.props.metricLimitSummary},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isViewFilter,n=t?this.props.viewFilterSummary:this.props.metricLimitSummary,a=function(t,n){e.setState({showEditorModal:!0,expressionIndex:t,targetObjectId:n})},i=function(t,n,a,r){t.stopPropagation(),e.props.onDeleteAnExpression(n,a,r)};return r.a.createElement("div",{className:"filter-list-div"},r.a.createElement("div",{className:"filter-title-div"},r.a.createElement("div",{className:"filter-title-new",onClick:function(){a()}},"New"),r.a.createElement("span",{className:"filter-title-clear",onClick:function(){e.props.onClearAllFilterExpressions(t)}},"Clear All")),r.a.createElement("div",{className:"filter-list-list"},function(){if(e.state.isViewFilter)return n.map(function(e,n){return r.a.createElement("div",{key:n,className:"filter-list-item",onClick:function(){a(n,"000")}},r.a.createElement("div",{className:"filter-list-item-content"},e," "),r.a.createElement("span",{onClick:function(e){return i(e,n,t,"000")},className:"filter-list-item-close QP__delete__icon"}))});var s=[],c=function(e){s.push(n[e].map(function(n,s){return r.a.createElement("div",{key:e+s,className:"filter-list-item",onClick:function(){a(s,e)}},r.a.createElement("div",{className:"filter-list-item-content"},n),r.a.createElement("span",{onClick:function(n){return i(n,s,t,e)},className:"filter-list-item-close QP__delete__icon"}))}))};for(var o in n)c(o);return s}()),r.a.createElement(We,{isViewFilter:t,show:this.state.showEditorModal,handleCloseEditor:function(){e.setState({showEditorModal:!1,expressionIndex:void 0})},expressionIndex:this.state.expressionIndex,targetObjectId:this.state.targetObjectId,needChange:this.state.needChange}))}}]),t}(r.a.Component));var ze=Object(c.b)(function(e){var t=[],n=[];return e.filters&&(t=e.filters.viewFilter.summary,n=e.filters.metricLimits.summary),{viewFilterSummary:t,metricLimitSummary:n}},function(e){return Object(v.b)({onDeleteAnExpression:He,onClearAllFilterExpressions:Ke},e)})($e),Ye=(n(238),n(264)),Je=n(240),Ze=n(269),et=n(265),tt=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onSortingElemetsSelectChange",value:function(e,t){var n=this,a=this.props,r=a.ui,i=a.onChangeSortingElement,s=a.onChangeSortingOutputData,c=a.onChangeSortingChoice;r.sorting.forEach(function(a,o){if(o===e){if(t===a.sortby)return;i(e,t),c(e,0),s(e),e===r.sortingDropdownNum-1&&n.onAddDropdownAction()}})}},{key:"onSortingChoiceSelectChange",value:function(e,t){var n=this.props,a=n.ui,r=n.onChangeSortingChoice,i=n.onChangeSortingOutputData;a.sorting.forEach(function(n,a){if(a===e){if(t===n.order)return;r(e,t),i(e)}})}},{key:"onAddDropdownAction",value:function(){(0,this.props.onAddSortingDropdown)(this.props.ui.sortingDropdownNum+1)}},{key:"getSortingElementTitle",value:function(e){var t=this.props.ui.sorting;return this.hasSelectElement(e)?this.getElementName(this.props.data[t[e].sortby]):0===this.props.data.length?"Loading data":""}},{key:"isCurrentIndexSelected",value:function(e){var t=this.props.ui.sorting;return!this.hasSelectElement(e)||this.isElementSelected(this.props.data[t[e].sortby])}},{key:"getSortingChoiceTile",value:function(e){var t=this.props.ui.sorting;return 0===t[e].order?"Ascending":1===t[e].order?"Descending":""}},{key:"isAttribute",value:function(e){return"attribute"===this.props.data[e].type}},{key:"hasSelectElement",value:function(e){return this.props.ui.sorting[e].sortby>=0}},{key:"useDefaultSortingOrder",value:function(e){var t=this.props.ui.sorting;return!(!this.hasSelectElement(e)||!this.isAttribute(t[e].sortby))}},{key:"getElementName",value:function(e){return"attribute"===e.type?e.attribute.name:"metric"===e.type?e.metric.name:"form"===e.type?e.attribute.name+"-"+e.form.name:void 0}},{key:"onDeleteDropdownButtonClick",value:function(e){(0,this.props.onDeleteSortingDropdown)(e)}},{key:"onClearSortingStateButtonClick",value:function(){(0,this.props.onClearSortingState)()}},{key:"isElementSelected",value:function(e){var t=this.props,n=t.attributes,a=t.metrics;return"attribute"===e.type||"form"===e.type?!O.a.get(n,"ui.unselect.".concat(e.attribute.id),!1):!O.a.get(a,"ui.unselect.".concat(e.metric.id),!1)}},{key:"render",value:function(){var e=this,t=this.props.ui,n=t.sorting,a=t.sortingDropdownNum,i=this.props.data,s=this.props.ui.sorting.map(function(e){return e.sortby}),c=0===this.props.data.length;return r.a.createElement("div",{className:"QP__sorting"},r.a.createElement("div",{className:"QP__conditions__title"},"Advance Sort"),r.a.createElement("div",{className:"QP__sorting__table"},r.a.createElement("div",{className:"QP__sorting__table__index"},r.a.createElement("div",{className:"QP__sorting__table__order"},"Order"),r.a.createElement("div",{className:"QP__sorting__table__sort"},"Sort by"),r.a.createElement("div",{className:"QP__sorting__table__clear",onClick:function(t){return e.onClearSortingStateButtonClick()}},"Clear All")),r.a.createElement("div",{className:"QP__sorting__table__content"},r.a.createElement(Ye.a,{className:"QP__sorting__table__row"},Object(j.a)(Array(a).keys()).map(function(t){var a=e.isCurrentIndexSelected(t);return r.a.createElement(Je.a,{key:t,className:"QP__sorting__table__row__item"},r.a.createElement("div",{className:"QP__sorting__table__row__index"},t+1),r.a.createElement("div",{className:"QP__sorting__table__row__element_group"},r.a.createElement(f.a,{className:a?"QP__sorting__table__row__elementButton":"QP__sorting__table__row__unselected__elementButton",dropup:!0,title:e.getSortingElementTitle(t),disabled:c,id:"dropdown-size-medium"},i.map(function(a,i){return r.a.createElement(_.a,{className:e.isElementSelected(a)?"QP__sorting__table__row__elementMenu__Item":"QP__sorting__table__row__elementMenu__Unselected__Item",key:i,active:i===n[t].sortby,eventKey:i,onSelect:function(n){return e.onSortingElemetsSelectChange(t,n)}},e.getElementName(a))}).filter(function(e,t){return!s.includes(t)}))),r.a.createElement("div",{className:"QP__sorting__table__row__sorting_group"},e.useDefaultSortingOrder(t)?r.a.createElement("div",{className:a?"QP__sorting__table__row__default":"QP__sorting__table__row__unselected__default"},"Default Order"):r.a.createElement(f.a,{className:a?"QP__sorting__table__row__sortingButton":"QP__sorting__table__row__unselected__sortingButton",dropup:!0,title:e.getSortingChoiceTile(t),id:"dropdown-size-medium",disabled:n[t].sortby<0||"attribute"===i[n[t].sortby].type},Object(j.a)(Array(2).keys()).map(function(a){return r.a.createElement(_.a,{className:"QP__sorting__table__row__sortingMenu__Item",key:a,active:a===n[t].order,eventKey:a,onSelect:function(n){return e.onSortingChoiceSelectChange(t,n)}},0===a?"Ascending":"Descending")}))),a?"":r.a.createElement(Ze.a,{key:"top",placement:"top",overlay:r.a.createElement(et.a,{id:"tooltip-top"},"Object is unselected")},r.a.createElement("div",{className:"QP__warning__icon warning"})),e.hasSelectElement(t)?r.a.createElement("div",{className:"QP__sorting__table__row__delete QP__delete__icon",onClick:function(n){return e.onDeleteDropdownButtonClick(t)}}):"")})))))}}]),t}(r.a.Component),nt=function(e,t){return{type:U,payload:{dropDownIndex:e,subIndex:t}}},at=function(e,t){return{type:X,payload:{dropDownIndex:e,subIndex:t}}},rt=function(e){return{type:K,payload:e}},it=function(e){return{type:W,payload:e}},st=function(e){return{type:$,payload:e}},ct=function(){return{type:z,payload:""}};var ot=Object(c.b)(function(e){var t=e.sorting,n=t.output,a=t.ui;return{output:n,data:t.data,ui:a,metrics:e.metrics,attributes:e.attributes}},function(e){return Object(v.b)({onChangeSortingElement:nt,onChangeSortingChoice:at,onAddSortingDropdown:rt,onChangeSortingOutputData:it,onDeleteSortingDropdown:st,onClearSortingState:ct},e)})(tt),lt=n(88),ut=n.n(lt),dt=(n(252),["Headers","Response"]),mt=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"selectRequest",value:function(e){this.props.ui.selectRequestIndex!==e&&this.props.onSelectRequest(e)}},{key:"selectDetailTab",value:function(e){this.props.ui.selectDetailTab!==e&&this.props.onSelectDetailTab(e)}},{key:"generateHeadersTabContent",value:function(e){return r.a.createElement("div",{className:"QP__httpBoard__headers"},r.a.createElement("div",{className:"headers-lv-one"},"General"),r.a.createElement("div",{className:"headers-lv-two"},r.a.createElement("span",{className:"headers-lv-two__title"},"URL:"),e.url+x(e.params)),r.a.createElement("div",{className:"headers-lv-two"},r.a.createElement("span",{className:"headers-lv-two__title"},"Method:"),e.method.toUpperCase()),r.a.createElement("div",{className:"headers-lv-one"},"Request Headers"),e.requestHeader&&Object.keys(e.requestHeader).map(function(t){return r.a.createElement("div",{key:t,className:"headers-lv-two"},r.a.createElement("span",{className:"headers-lv-two__title"},t,":"),e.requestHeader[t])}),r.a.createElement("div",{className:"headers-lv-one"},"Request Body"),e.requestData&&r.a.createElement(ut.a,{json:e.requestData}))}},{key:"generateResponseTabContent",value:function(e){return r.a.createElement(ut.a,{json:e.responseBody})}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.ui,i=a.selectRequestIndex,s=a.selectDetailTab,c=void 0!==i;return r.a.createElement("div",{className:"QP__httpBoard"},r.a.createElement("div",{className:"QP__httpBoard__request-urls ".concat(c?"":" url-only")},r.a.createElement("div",{className:"QP__httpBoard__title QP__httpRequests"},r.a.createElement("div",null,"HTTP Requests"),r.a.createElement("div",{className:"QP__httpBoard__title__clear",onClick:function(){return e.props.onClearRequests()}},"Clear All")),r.a.createElement("div",{className:"QP__httpBoard__content"},n.map(function(t,a){var s=a===i?"selected":"";return r.a.createElement("div",{key:a,ref:function(t){a===n.length-1&&(e.lastUrlItem=t)},onClick:function(){return e.selectRequest(a)},className:"QP__httpBoard__url-list-item ".concat(s)},"".concat(t.method.toUpperCase()," ").concat(t.url).concat(x(t.params)))}))),c&&r.a.createElement("div",{className:"QP__httpBoard__request-details"},r.a.createElement("div",{className:"QP__httpBoard__title"},!c&&r.a.createElement("div",null,"Details"),c&&dt.map(function(t,n){return r.a.createElement("div",{key:n,onClick:function(){return e.selectDetailTab(n)},className:"QP__httpBoard__title-detail-tab ".concat((a=n,s===a?"selected":"unselected"))},t);var a})),c&&r.a.createElement("div",{className:"QP__httpBoard__content"},0===s&&this.generateHeadersTabContent(n[i]),1===s&&n[i].responseBody&&this.generateResponseTabContent(n[i]))))}}]),t}(r.a.Component),pt=function(){return{type:re}},ft=function(e){return{type:ne,payload:e}},_t=function(e){return{type:ae,payload:e}};var ht=Object(c.b)(function(e){var t=e.http;return{data:t.data,ui:t.ui}},function(e){return Object(v.b)({onSelectRequest:ft,onSelectDetailTab:_t,onClearRequests:pt},e)})(mt),vt=(n(254),function(e){var t=e.items,n=e.unselect,a=e.isAttributeList,i=e.onChangeItemSelection,s=e.onChangeAllSelection,c=a?"qp-attribute-icon":"qp-metric-icon";return r.a.createElement("div",{className:"QP__items"},t.length>0&&r.a.createElement("div",{className:"QP__item QP__items__selectAll",onClick:function(){!function(){var e=0===Object.keys(n).length;s(!e,t)}()}},r.a.createElement("input",{readOnly:!0,type:"checkbox",checked:0===Object.keys(n).length}),r.a.createElement("div",{className:"QP__item-icon ".concat(0===Object.keys(n).length?"qp-multi-check-icon":"qp-multi-uncheck-icon")}),r.a.createElement("div",{className:"QP__item-all-text"},"All")),r.a.createElement("div",{className:"QP__items-list"},t.map(function(e){return r.a.createElement("div",{className:"QP__item",key:e.id,onClick:function(){i(e.id)}},r.a.createElement("input",{readOnly:!0,type:"checkbox",checked:!(e.id in n)}),r.a.createElement("div",{className:"QP__item-icon ".concat(e.id in n?"qp-multi-uncheck-icon":"qp-multi-check-icon")}),r.a.createElement("div",{className:"QP__item-category-icon ".concat(c)}),r.a.createElement("div",{className:"QP__item-name"},e.name))})))}),bt=function(e){return{type:D,payload:e}},Et=function(e,t){return{type:F,payload:{attributes:t,select:e}}};var yt=Object(c.b)(function(e){return{items:ye(e),unselect:e.attributes.ui.unselect,isAttributeList:!0}},function(e){return Object(v.b)({onChangeItemSelection:bt,onChangeAllSelection:Et},e)})(vt),gt=function(e){return{type:R,payload:e}},Ot=function(e,t){return{type:M,payload:{metrics:t,select:e}}};var xt=Object(c.b)(function(e){return{items:ge(e),unselect:e.metrics.ui.unselect,isAttributeList:!1}},function(e){return Object(v.b)({onChangeItemSelection:gt,onChangeAllSelection:Ot},e)})(vt),wt=(n(256),function(){return r.a.createElement("div",{className:"QP__attributes-metrics-area"},r.a.createElement("div",{className:"QP__attributes-metrics-container"},r.a.createElement("div",{className:"QP__conditions__title"},"Attributes"),r.a.createElement("div",{className:"QP__attributes-metrics-area__list"},r.a.createElement(yt,null))),r.a.createElement("div",{className:"QP__attributes-metrics-container"},r.a.createElement("div",{className:"QP__conditions__title"},"Metrics"),r.a.createElement("div",{className:"QP__attributes-metrics-area__list"},r.a.createElement(xt,null))))}),It=n(124),jt=(n(258),/^([1-9][0-9]*)$/),kt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={realCurPage:-1,curPageInputText:"0"},e}return Object(m.a)(t,e),Object(l.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return t.realCurPage!==e.currentPageIndex?{realCurPage:e.currentPageIndex,curPageInputText:(e.currentPageIndex+1).toString()}:t}}]),Object(l.a)(t,[{key:"isValidValue",value:function(e){if(!e.match(jt))return!1;var t=parseInt(e,10);return t>0&&t<=this.props.totalPageCount}},{key:"onChangeCurrentPage",value:function(e){var t=this,n=e.target.value;this.setState({curPageInputText:n}),void 0!==this.switchPageTimer&&clearTimeout(this.switchPageTimer),this.isValidValue(n)&&(this.switchPageTimer=setTimeout(function(){t.props.onGoToPage(parseInt(n,10)-1)},500))}},{key:"render",value:function(){var e=this,t=this.isValidValue(this.state.curPageInputText)?"":"error";return r.a.createElement("input",{type:"text",className:"QP__results__current-page ".concat(t),disabled:this.props.loading,value:this.state.curPageInputText,onChange:function(t){return e.onChangeCurrentPage(t)}})}}]),t}(r.a.Component),Nt=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.currentPageIndex,a=e.totalPageCount,i=e.onGoToPage,s=e.loading;return r.a.createElement("div",{className:"QP__results"},r.a.createElement("div",{className:"QP__results__title"},r.a.createElement("div",{className:"QP__results__label"},"RESULTS"),-1!==n&&r.a.createElement("div",{className:"QP__results__pages"},r.a.createElement("div",{className:"QP__results__changepage"},r.a.createElement("div",{className:"qp-icon qp-first-page-icon",onClick:function(){i(0)}})),r.a.createElement("div",{className:"QP__results__changepage"},n>0&&r.a.createElement("div",{className:"qp-icon qp-prev-page-icon",onClick:function(){i(n-1)}})),r.a.createElement(kt,{currentPageIndex:n,loading:s,totalPageCount:a,onGoToPage:i}),r.a.createElement("div",{className:"QP__results__pages-separator"},"of"),r.a.createElement("div",{className:"QP__results__pages-total-count"},a),r.a.createElement("div",{className:"QP__results__changepage"},n<a-1&&r.a.createElement("div",{className:"qp-icon qp-next-page-icon",onClick:function(){i(n+1)}})),r.a.createElement("div",{className:"QP__results__changepage"},r.a.createElement("div",{className:"qp-icon qp-last-page-icon",onClick:function(){i(a-1)}})))),r.a.createElement("div",{className:"QP__results__table"},-1!==n&&r.a.createElement(It.a,{chartType:"Table",width:"100%",height:"100%",data:t[n],options:{showRowNumber:!1,sort:"disable",width:"100%",height:"100%"}})))}}]),t}(r.a.Component),Ct=function(e){return function(t,n){void 0!==n().resultTable.data[e]?t({type:Z,payload:e}):(t({type:ee}),Pt(t,n,e).catch(w(t,L)))}},Pt=function(){var e=Object(y.a)(E.a.mark(function e(t,n,a){var r,i,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<ie)){e.next=24;break}return e.prev=2,e.next=5,Ne(t,n,a);case 5:return i=e.sent,t({type:J,payload:i}),e.abrupt("return",i);case 10:if(e.prev=10,e.t0=e.catch(2),r>0||404!==e.t0.response.status){e.next=20;break}return e.next=16,ke(t,n,0);case 16:s=e.sent,t({type:Y,payload:s}),e.next=21;break;case 20:throw e.t0;case 21:r++,e.next=1;break;case 24:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t,n,a){return e.apply(this,arguments)}}();var St=Object(c.b)(function(e){var t=e.resultTable,n=t.data,a=t.ui;return{data:n,currentPageIndex:a.currentPageIndex,totalPageCount:a.totalPageCount,loading:a.loading}},function(e){return Object(v.b)({onGoToPage:Ct},e)})(Nt),Lt=n(266),Qt=n(82),At=(n(260),function(e){var t=e.dataIsEmpty,n=e.latestError,a=e.showError,i=e.onApplyCondition,s=e.onHideErrorMessage;return r.a.createElement("div",{className:"quality-play-app"},a&&r.a.createElement(Lt.a,{className:"pop-alert",bsStyle:"danger",onDismiss:s},n),r.a.createElement("div",{className:"QP__title"},r.a.createElement("div",{className:"QP__title__icon qp-mstr-icon"})),r.a.createElement("div",{className:"QP__context"},r.a.createElement("div",{className:"QP__context__left"},r.a.createElement(Ae,null),!t&&r.a.createElement("div",{className:"QP__conditions"},r.a.createElement(wt,null),r.a.createElement("div",{className:"QP__conditions__viewFilters"},r.a.createElement("div",{className:"QP__conditions__title"},"View Filters"),r.a.createElement(ze,{isViewFilter:!0})),r.a.createElement("div",{className:"QP__conditions__metrics"},r.a.createElement("div",{className:"QP__conditions__title"},"Metric Limits"),r.a.createElement(ze,{isViewFilter:!1})),r.a.createElement(ot,null)),!t&&r.a.createElement("div",{className:"QP__apply-bar"},r.a.createElement(Qt.a,{className:"QP__apply-bar__button",onClick:function(){return i()}},"Apply"))),r.a.createElement("div",{className:"QP__context__right"},r.a.createElement(St,null),r.a.createElement("div",{className:"QP__https"},r.a.createElement(ht,null)))))}),Tt=function(){return{type:Q}},Dt=function(){return function(e,t){ke(e,t,0).then(function(t){e({type:J,payload:t})}).catch(w(e,L))}};var Ft=Object(c.b)(function(e){var t=e.datasetList.data,n=e.ui,a=n.latestError,r=n.showError;return{dataIsEmpty:0===t.length,latestError:a,showError:r}},function(e){return Object(v.b)({onApplyCondition:Dt,onHideErrorMessage:Tt},e)})(At),Rt={ui:{projectId:S.projectId,pageLimit:S.itemPerPage,latestError:"",showError:!1},datasetList:{data:[],ui:{selectDatasetIndex:-1}},attributes:{ui:{unselect:{}}},metrics:{ui:{unselect:{}}},resultTable:{data:[],ui:{currentPageIndex:-1,totalPageCount:0,loading:!1}},http:{data:[],ui:{}},filters:{viewFilter:{summary:[],expressions:{operator:"And",operands:[]}},metricLimits:{summary:{},expressions:{}},ui:{}},sorting:{output:[],ui:{sortingDropdownNum:1,sorting:[{sortby:-1,order:-1}]},data:[]}},Mt=n(126),qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt.filters,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(Mt.a)(e,function(n){switch(t.type){case q:var a=t.payload.isViewFilter,r=t.payload.targetObjectId,i=t.payload.expression,s=t.payload.contentDisplay;if(a)n.viewFilter.expressions.operands=[].concat(Object(j.a)(e.viewFilter.expressions.operands),[i]),n.viewFilter.summary=[].concat(Object(j.a)(e.viewFilter.summary),[s]);else{var c=Object.assign({},e.metricLimits.expressions),o=Object.assign({},e.metricLimits.summary);if(c[r])c[r].operands.push(i),o[r].push(s);else{var l={operator:"And",operands:[i]};c[r]=l,o[r]=[s]}n.metricLimits.expressions=c,n.metricLimits.summary=o}return;case V:var u=t.payload.expressionIndex,d=t.payload.expression,m=t.payload.contentDisplay;if(r=t.payload.targetObjectId,a=t.payload.isViewFilter)n.viewFilter.expressions.operands=[].concat(Object(j.a)(e.viewFilter.expressions.operands.slice(0,u)),[d],Object(j.a)(e.viewFilter.expressions.operands.slice(u+1))),n.viewFilter.summary=[].concat(Object(j.a)(e.viewFilter.summary.slice(0,u)),[m],Object(j.a)(e.viewFilter.summary.slice(u+1)));else{var p=Object.assign({},e.metricLimits.expressions),f=Object.assign({},e.metricLimits.summary);p[r].operands=[].concat(Object(j.a)(e.metricLimits.expressions[r].operands.slice(0,u)),[d],Object(j.a)(e.metricLimits.expressions[r].operands.slice(u+1))),f[r]=[].concat(Object(j.a)(f[r].slice(0,u)),[m],Object(j.a)(f[r].slice(u+1))),n.metricLimits.expressions=p,n.metricLimits.summary=f}return;case B:var _=t.payload.index;if(a=t.payload.isViewFilter,r=t.payload.targetObjectId,a)n.viewFilter.expressions.operands=[].concat(Object(j.a)(e.viewFilter.expressions.operands.slice(0,_)),Object(j.a)(e.viewFilter.expressions.operands.slice(_+1))),n.viewFilter.summary=[].concat(Object(j.a)(e.viewFilter.summary.slice(0,_)),Object(j.a)(e.viewFilter.summary.slice(_+1)));else{var h=Object.assign({},e.metricLimits.expressions),v=Object.assign({},e.metricLimits.summary);e.metricLimits.expressions[r].operands.length>1?(h[r].operands=[].concat(Object(j.a)(e.metricLimits.expressions[r].operands.slice(0,_)),Object(j.a)(e.metricLimits.expressions[r].operands.slice(_+1))),v[r]=[].concat(Object(j.a)(v[r].slice(0,_)),Object(j.a)(v[r].slice(_+1)))):(delete h[r],delete v[r]),n.metricLimits.expressions=h,n.metricLimits.summary=v}return;case H:return void((a=t.payload)?e.viewFilter&&(n.viewFilter.expressions.operands=[],n.viewFilter.summary=[]):e.metricLimits&&(n.metricLimits.expressions={},n.metricLimits.summary={}));default:return}})},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt.ui,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(N.a)({},e,{latestError:t.payload,showError:!0});case Q:return Object(N.a)({},e,{showError:!1});default:return e}};function Vt(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt.attributes,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};switch(t.type){case D:n=Object(N.a)({},e.ui.unselect);var a=t.payload;return a in n?delete n[a]:n[a]=!0,Object(N.a)({},e,{ui:{unselect:n}});case F:n={};var r=t.payload,i=r.attributes;if(!r.select){var s,c=Vt(i);try{for(c.s();!(s=c.n()).done;)n[s.value.id]=!0}catch(o){c.e(o)}finally{c.f()}}return Object(N.a)({},e,{ui:{unselect:n}});default:return e}};function Ut(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt.metrics,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};switch(t.type){case R:n=Object(N.a)({},e.ui.unselect);var a=t.payload;return a in n?delete n[a]:n[a]=!0,Object(N.a)({},e,{ui:{unselect:n}});case M:n={};var r=t.payload,i=r.metrics;if(!r.select){var s,c=Ut(i);try{for(c.s();!(s=c.n()).done;)n[s.value.id]=!0}catch(o){c.e(o)}finally{c.f()}}return Object(N.a)({},e,{ui:{unselect:n}});default:return e}},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt.datasetList,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case G:var n=t.payload,a=n.data,r=n.attributeId,i=Object(j.a)(e.data),s=i[e.ui.selectDatasetIndex],c=s.definition.availableObjects.attributes.findIndex(function(e){return e.id===r});return s.definition.availableObjects.attributes[c].elements=a,Object(N.a)({},e,{data:i});default:return e}},$t=S.itemPerPage,zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt.resultTable,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Y:return Object(N.a)({},e,{instanceId:t.payload.instanceId});case J:var n=t.payload,a=n.data.paging,r=a.offset/S.itemPerPage,i=0===r?[]:Object(j.a)(e.data),s=Math.ceil(a.total/$t);return i[r]=function(e){var t,n=function(e,t,n){return e.elements.map(function(e){return e.subtotal?e.formValues[0]:e.formValues[n]})},a=function(e,t,n){return e.elements.map(function(e){return e.formValues[n]})},r=function(e,t){return t.map(function(t){return t.map(function(t,n){return e[n].elements[t]})})},i=function(){var t=e.definition.grid.rows,a=[],r=0;return t.forEach(function(e){var t={};if(1===e.forms.length){var i=e.name;t.name=i,t.elements=n(e,0,0),t.index=r,a.push(t)}else e.forms.forEach(function(r,i,s){t={};var c="".concat(e.name,"@").concat(r.name);t.name=c,t.elements=n(e,e.name,i),t.index=s,a.push(t)});r++}),a}(),s=[].concat(Object(j.a)(function(){var t=e.definition.grid.columns,n=[],r=0;return t.forEach(function(e){if("Metrics"!==e.name){var t={};if(1===e.forms.length){var i=e.name;t.name=i,t.elements=a(e,0,0),t.index=r,n.push(t)}else e.forms.forEach(function(r,i,s){t={};var c="".concat(e.name,"@").concat(r.name);t.name=c,t.elements=a(e,e.name,i),t.index=s,n.push(t)});r++}}),n}()),[function(){var t=0,n={};return e.definition.grid.columns.forEach(function(e){"Metrics"===e.name&&(n={name:e.name,elements:e.elements.map(function(e){return e.name}),index:t}),t++}),n}()]),c=r(i,e.data.headers.rows),o=(r(s,(t=e.data.headers.columns)[0].map(function(e,n){return t.map(function(e){return e[n]})})),e.data.headers.rows[0].map(function(e,t){return i[t].name})),l=[];s.forEach(function(e){e.elements?l.push.apply(l,Object(j.a)(e.elements)):l.push(e.name)}),e.data.metricValues.raw;var u=e.data.metricValues.formatted,d=[].concat(Object(j.a)(o),l),m=c.map(function(e,t){return[].concat(Object(j.a)(e),Object(j.a)(u[t]))});return[d].concat(Object(j.a)(m))}(n),{data:i,instanceId:n.instanceId,ui:{currentPageIndex:r,totalPageCount:s,loading:!1}};case Z:var c=t.payload;return Object(N.a)({},e,{ui:Object(N.a)({},e.ui,{currentPageIndex:c})});case ee:return Object(N.a)({},e,{ui:Object(N.a)({},e.ui,{loading:!0})});default:return e}},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt.http,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case te:return Object(N.a)({},e,{data:[].concat(Object(j.a)(e.data),[t.payload])});case re:return{data:[],ui:{}};case ne:return Object(N.a)({},e,{ui:{selectRequestIndex:t.payload,selectDetailTab:0}});case ae:return Object(N.a)({},e,{ui:Object(N.a)({},e.ui,{selectDetailTab:t.payload})});default:return e}};function Jt(e){var t=e.ui.sorting.map(function(e){return e.sortby}).filter(function(e){return e>=0});return Object(N.a)({},e,{output:t.map(function(t){return e.data[t]})})}var Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt.sorting,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case X:return Object(N.a)({},e,{ui:Object(N.a)({},e.ui,{sorting:e.ui.sorting.map(function(e,n){return n===t.payload.dropDownIndex?Object(N.a)({},e,{order:t.payload.subIndex}):e})})});case U:return Object(N.a)({},e,{ui:Object(N.a)({},e.ui,{sorting:e.ui.sorting.map(function(e,n){return n===t.payload.dropDownIndex?Object(N.a)({},e,{sortby:t.payload.subIndex}):e})})});case K:return Object(N.a)({},e,{ui:{sortingDropdownNum:t.payload,sorting:[].concat(Object(j.a)(e.ui.sorting),[{sortby:-1,order:-1}])}});case W:return Jt(Object(N.a)({},e,{data:e.data.map(function(n,a){return a===e.ui.sorting[t.payload].sortby&&"attribute"!==n.type?Object(N.a)({},n,{order:0===e.ui.sorting[t.payload].order?"ascending":"descending"}):n})}));case $:return Jt(Object(N.a)({},e,{ui:Object(N.a)({},e.ui,{sorting:e.ui.sorting.filter(function(e,n){return n!==t.payload}),sortingDropdownNum:e.ui.sortingDropdownNum-1})}));case z:return Object(N.a)({},e,{output:[],ui:{sortingDropdownNum:1,sorting:[{sortby:-1,order:-1}]}});default:return e}},en=Object(v.c)({ui:Bt,datasetList:Wt,filters:qt,sorting:Zt,http:Yt,attributes:Ht,metrics:Kt,resultTable:zt}),tn=function(e,t){var n={},a=[];switch(t.type){case T:return n=Object(N.a)({},e.datasetList,{ui:{selectDatasetIndex:t.payload}}),a=I(e.datasetList.data[t.payload].definition),Object(N.a)({},Rt,{datasetList:n,sorting:Object(N.a)({},e.sorting,{data:a,output:[],ui:{sortingDropdownNum:1,sorting:[{sortby:-1,order:-1}]}}),http:e.http});case A:return n={data:t.payload,ui:{selectDatasetIndex:0}},a=I(t.payload[0].definition),Object(N.a)({},Rt,{datasetList:n,sorting:Object(N.a)({},e.sorting,{data:a}),http:e.http});default:return en(e,t)}},nn=n(127);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var an=Object(v.a)(nn.a)(v.d)(tn,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(r.a.createElement(c.a,{store:an},r.a.createElement(Ft,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[128,2,1]]]);
//# sourceMappingURL=main.502356e3.chunk.js.map